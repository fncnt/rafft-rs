# Example Setup

This guide is intended to aid in setting up a working environment for building `rafft-rs`.
This should work on any Linux distribution and MacOS.

In many cases, though, there are already packages for your system, simplifying some steps of the setup.
Furthermore, there are many different possible strategies for setting up a building environment.
This is merely one of them.

Use this guide if you're not allowed to install packages on your system.

If any issues arise following this guide, please [open a new issue](https://github.com/strevol-mpi-mis/rafft-rs/issues/new) on Github.

## Installing Rust

Although there is probably a Rust packages for your system, the recommended way of installing Rust
is using [`rustup`](https://www.rust-lang.org/tools/install).
Please follow those instructions to install Rust.

## Installing `ViennaRNA`

In order to install [`ViennaRNA`](https://www.tbi.univie.ac.at/RNA/), we're going to use the package provided by `Bioconda`.
Please follow [these instructions](https://bioconda.github.io/user/install.html) to set up `Bioconda`.

Let's create a new `conda` environment with `viennarna` installed:
```sh
conda create -n buildrafft viennarna pkg-config
```

Follow the on-screen instructions and then activate the environment:
```sh
conda activate buildrafft 
```

## Building `rafft-rs`

Clone the `rafft-rs` Github repository
```sh
git clone https://github.com/strevol-mpi-mis/rafft-rs
```

and change your working directory:
```sh
cd rafft-rs/
```

Export the following environment variable:
```sh
export CPATH=~/bin/miniconda3/envs/buildrafft/include/
```

Finally, build both the CLI executable `rufft` and the library `librafft.so` containing Python bindings:
```sh
cargo build --features librna-sys/auto,bindings --release
```

You should be able to locate `rufft` and `librafft.so` in the subdirectory `target/release/`.
Place them wherever you want.
To use the Python bindings, place `librafft.so` in the same directory as your Python scripts.

## Cleaning up

Clean up files generated by the Rust compiler (this also deletes the compiled programs if you did not move them):
```sh
cargo clean
```

Leave your `conda` environment:
```sh
conda deactivate
```
